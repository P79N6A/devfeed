webpackJsonp([0],{1:function(t,e,a){t.exports=a("Hsqg")},"1Nlz":function(t,e,a){var n=a("xb0E");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),a("qePi")("1c273e10",n,!0)},"1YVk":function(t,e,a){var n=a("3yZI");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),a("qePi")("01471fed",n,!0)},"3yZI":function(t,e,a){e=t.exports=a("7DhM")(),e.push([t.i,".team-wrap{padding:0 15px;min-width:500px}",""])},"7DhM":function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var a=this[e];a[2]?t.push("@media "+a[2]+"{"+a[1]+"}"):t.push(a[1])}return t.join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},s=0;s<this.length;s++){var i=this[s][0];"number"==typeof i&&(n[i]=!0)}for(s=0;s<e.length;s++){var r=e[s];"number"==typeof r[0]&&n[r[0]]||(a&&!r[2]?r[2]=a:a&&(r[2]="("+r[2]+") and ("+a+")"),t.push(r))}},t}},"7nMR":function(t,e,a){a("1YVk");var n=a("mEwh")(a("DeHR"),a("JzL8"),null,null);t.exports=n.exports},DeHR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("KTPw"),s=a.n(n),i=a("poEP"),r=a.n(i),o=a("lr0V"),l=a.n(o),d=a("xXjE"),c=a.n(d),u={title:"",logo:"",website:"",description:""};e.default={name:"viewHome",data:function(){return{loading:!0,page:1,pageSize:10,teams:{data:[]},currentTeam:u,index:-1}},watch:{page:function(){this.loadTeams()},pageSize:function(){this.loadTeams()}},methods:{reset:function(){this.currentTeam=u,this.index=-1},loadTeams:function(){var t=this;axios.get("/api/v1/teams/list",{params:{page:this.page,size:this.pageSize}}).then(function(e){t.loading&&(t.loading=!1),t.teams=e.data,bus.$emit("pageChanged",e.data)})},pageChange:function(t){this.page+=t},addTeam:function(){this.currentTeam=u,this.index=-1,jQuery("#teamModal").modal("show")},editteam:function(t,e){this.index=e,this.currentTeam=t,jQuery("#teamModal").modal("show")},delteam:function(t,e){this.teams.data.splice(e,1),this.index=-1},teamSaved:function(t){-1!==this.index?this.teams.data.splice(this.index,1,t):this.teams.data.unshift(t),jQuery("#teamModal").modal("hide")}},components:{loading:s.a,teamList:r.a,pager:l.a,teamModal:c.a},created:function(){this.loadTeams(),bus.$on("editteam",this.editteam),bus.$on("delteam",this.delteam),bus.$on("pageChange",this.pageChange),bus.$on("addTeam",this.addTeam),bus.$on("teamSaved",this.teamSaved),bus.$on("modalCanceled",this.reset)},destroyed:function(){bus.$off("editteam",this.editteam),bus.$off("delteam",this.delteam),bus.$off("pageChange",this.pageChange),bus.$off("addTeam",this.addTeam),bus.$off("teamSaved",this.teamSaved)}}},FkxB:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"teamDetail",props:["index","team"],methods:{edit:function(t){bus.$emit("editteam",t,this.index)},delTeam:function(t){bus.$emit("delteam",t,this.index)}}}},G34L:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"loading",props:["className"],data:function(){return{cls:this.className}}}},Hsqg:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("onmU"),s=a.n(n),i=a("FAZI");a("WRGp"),s.a.use(i.default);var r=a("7nMR"),o=[{path:"/admin/team",component:r}],l=new i.default({mode:"history",routes:o});window.bus=new s.a,new s.a({el:"#teamApp",router:l,methods:{addTeam:function(){bus.$emit("addTeam")}}})},JzL8:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"team-wrap"},[t.loading?a("loading",{attrs:{className:t.loading}}):t._e(),t._v(" "),t.teams.data?a("team-list",{attrs:{teams:t.teams.data}}):t._e(),t._v(" "),t.teams.data?a("pager",{on:{pagechange:t.pageChange}}):t._e(),t._v(" "),a("team-modal",{attrs:{id:"teamModal",team:t.currentTeam},slot:"modal"})],1)},staticRenderFns:[]}},KTPw:function(t,e,a){a("Zq/f");var n=a("mEwh")(a("G34L"),a("wOOF"),null,null);t.exports=n.exports},TJnQ:function(t,e){t.exports=function(t,e){for(var a=[],n={},s=0;s<e.length;s++){var i=e[s],r=i[0],o=i[1],l=i[2],d=i[3],c={id:t+":"+s,css:o,media:l,sourceMap:d};n[r]?n[r].parts.push(c):a.push(n[r]={id:r,parts:[c]})}return a}},WRGp:function(t,e,a){void 0===window.axios&&(window.axios=a("6sKG"));var n=document.head.querySelector('meta[name="csrf-token"]');window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",n&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=n.content)},Xk6u:function(t,e,a){a("1Nlz");var n=a("mEwh")(a("FkxB"),a("jrQe"),null,null);t.exports=n.exports},"Zq/f":function(t,e,a){var n=a("wSAR");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),a("qePi")("98ca94e4",n,!0)},jrQe:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-xs-6 col-sm-6 col-md-4 col-lg-2"},[a("div",{staticClass:"thumbnail team"},[a("img",{staticClass:"logo img-thumbnail",attrs:{src:t.team.logo,alt:"team.title",width:"200",height:"200"}}),t._v(" "),a("div",{staticClass:"caption desc"},[a("h3",{staticClass:"title"},[t._v(t._s(t.team.title))]),t._v(" "),a("p",[a("strong",[t._v("获赞："+t._s(t.team.likes))]),t._v("人次")]),t._v(" "),a("p",[a("strong",[t._v("文章："+t._s(Math.round(1e3*Math.random())))]),t._v("篇")]),t._v(" "),a("p",{staticClass:"options"},[a("button",{staticClass:"btn btn-primary",attrs:{role:"button"},on:{click:function(e){t.edit(t.team)}}},[t._v("编辑")]),t._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{role:"button"},on:{click:function(e){t.delTeam(t.team)}}},[t._v("删除")])])])])])},staticRenderFns:[]}},lr0V:function(t,e,a){var n=a("mEwh")(a("pwux"),a("y7Qv"),null,null);t.exports=n.exports},mEwh:function(t,e){t.exports=function(t,e,a,n){var s,i=t=t||{},r=typeof t.default;"object"!==r&&"function"!==r||(s=t,i=t.default);var o="function"==typeof i?i.options:i;if(e&&(o.render=e.render,o.staticRenderFns=e.staticRenderFns),a&&(o._scopeId=a),n){var l=Object.create(o.computed||null);Object.keys(n).forEach(function(t){var e=n[t];l[t]=function(){return e}}),o.computed=l}return{esModule:s,exports:i,options:o}}},poEP:function(t,e,a){var n=a("mEwh")(a("s0HO"),a("wsMs"),null,null);t.exports=n.exports},pwux:function(t,e,a){"use strict";function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"pager",data:function(){var t;return{pages:(t={prev_page_url:null,current_page:1,total:1},n(t,"current_page",1),n(t,"next_page_url",null),n(t,"from",0),n(t,"to",0),t)}},computed:{totalPage:function(){return Math.ceil(this.pages.total/this.pages.per_page)}},methods:{change:function(t){bus.$emit("pageChange",t)},changed:function(t){this.pages=t}},created:function(){bus.$on("pageChanged",this.changed)},destroyed:function(){bus.$off("pageChanged",this.changed)}}},qePi:function(t,e,a){function n(t){for(var e=0;e<t.length;e++){var a=t[e],n=c[a.id];if(n){n.refs++;for(var s=0;s<n.parts.length;s++)n.parts[s](a.parts[s]);for(;s<a.parts.length;s++)n.parts.push(i(a.parts[s]));n.parts.length>a.parts.length&&(n.parts.length=a.parts.length)}else{for(var r=[],s=0;s<a.parts.length;s++)r.push(i(a.parts[s]));c[a.id]={id:a.id,refs:1,parts:r}}}}function s(){var t=document.createElement("style");return t.type="text/css",u.appendChild(t),t}function i(t){var e,a,n=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(n){if(f)return h;n.parentNode.removeChild(n)}if(v){var i=m++;n=p||(p=s()),e=r.bind(null,n,i,!1),a=r.bind(null,n,i,!0)}else n=s(),e=o.bind(null,n),a=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else a()}}function r(t,e,a,n){var s=a?"":n.css;if(t.styleSheet)t.styleSheet.cssText=g(e,s);else{var i=document.createTextNode(s),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(i,r[e]):t.appendChild(i)}}function o(t,e){var a=e.css,n=e.media,s=e.sourceMap;if(n&&t.setAttribute("media",n),s&&(a+="\n/*# sourceURL="+s.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var d=a("TJnQ"),c={},u=l&&(document.head||document.getElementsByTagName("head")[0]),p=null,m=0,f=!1,h=function(){},v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,a){f=a;var s=d(t,e);return n(s),function(e){for(var a=[],i=0;i<s.length;i++){var r=s[i],o=c[r.id];o.refs--,a.push(o)}e?(s=d(t,e),n(s)):s=[];for(var i=0;i<a.length;i++){var o=a[i];if(0===o.refs){for(var l=0;l<o.parts.length;l++)o.parts[l]();delete c[o.id]}}}};var g=function(){var t=[];return function(e,a){return t[e]=a,t.filter(Boolean).join("\n")}}()},"rY+5":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default={name:"teamModal",props:["team"],data:function(){return{attr:{id:null,title:"",website:"",logo:"/img/team-default.png",realLogo:null,description:""},errors:[]}},watch:{team:function(t){this.attr=t}},computed:{title:function(){return void 0===this.team?"创建新团队":"编辑团队"},count:function(){return this.attr.description.length||0}},methods:{onCancel:function(){bus.$emit("modalCanceled")},fileChanged:function(t){var e=this,a=t.target.files[0];this.$set(this.attr,"realLogo",a);var n=new FileReader;n.onload=function(t){e.$set(e.attr,"logo",t.target.result)},n.readAsDataURL(a)},saveTeam:function(){var t=this,e=new FormData;for(var a in this.attr)this.attr[a]&&e.append(a,this.attr[a]);e.delete("logo"),e.delete("realLogo");var s=this.attr.realLogo;!s||"object"!==(void 0===s?"undefined":n(s))||"image/png"!==s.type&&"image/jpeg"!==s.type||e.append("logo",s),axios.post("/api/v1/teams/save",e).then(function(e){var a=e.data;switch(a.ret){case 1:t.errors=a.message;break;case 404:t.errors=["要编辑的团队不存在，可能已被删除。"];break;case 2:t.errors=["保存团队信息失败，请联系开发人员排查。"];break;default:bus.$emit("teamSaved",a.message)}}).catch(function(e){t.errors=[e.message]})}}}},s0HO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xk6u"),s=a.n(n);e.default={name:"teamList",props:["teams"],components:{teamDetail:s.a}}},t1Ps:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),a("h4",{staticClass:"modal-title"},[t._v(t._s(t.title))])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("ul",{directives:[{name:"show",rawName:"v-show",value:t.errors.length,expression:"errors.length"}],staticClass:"alert alert-danger",attrs:{role:"alert"}},t._l(t.errors,function(e){return a("li",[t._v(t._s(e))])})),t._v(" "),a("div",{staticClass:"team-form"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("团队名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.attr.title,expression:"attr.title"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.attr.title},on:{input:function(e){e.target.composing||(t.attr.title=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("团队网址")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.attr.website,expression:"attr.website"}],staticClass:"form-control",attrs:{type:"url",placeholder:"http://"},domProps:{value:t.attr.website},on:{input:function(e){e.target.composing||(t.attr.website=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("团队 LOGO")]),t._v(" "),a("div",{staticClass:"media"},[a("div",{staticClass:"media-left"},[t.attr.logo?a("img",{staticClass:"media-object img-thumbnail",attrs:{src:t.attr.logo,width:"200",height:"200"}}):t._e()]),t._v(" "),a("div",{staticClass:"media-body"},[a("p",{staticClass:"help-block"},[t._v("可选择jpg、png格式，尺寸为200x200像素")]),t._v(" "),a("input",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"file",accept:"image/jpeg,image/png"},on:{change:t.fileChanged}})])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("团队介绍")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.attr.description,expression:"attr.description"}],staticClass:"form-control",attrs:{rows:"5",placeholder:"输入团队介绍。"},domProps:{value:t.attr.description},on:{input:function(e){e.target.composing||(t.attr.description=e.target.value)}}}),t._v(" "),a("p",{staticClass:"help-block"},[t._v("500字以内，支持"),a("strong",[t._v("Markdown")]),t._v("语法。当前字数："+t._s(t.count)+" / 500")])])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.onCancel}},[t._v("关闭")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.saveTeam}},[t._v("保存")])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}]}},wOOF:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("p",{class:t.cls},[t._v("loading...")])])},staticRenderFns:[]}},wSAR:function(t,e,a){e=t.exports=a("7DhM")(),e.push([t.i,".cls{padding:50px 100px;text-align:center;margin:auto}",""])},wsMs:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},t._l(t.teams,function(t,e){return a("team-detail",{key:t.id,attrs:{team:t,index:e}})}))},staticRenderFns:[]}},xXjE:function(t,e,a){var n=a("mEwh")(a("rY+5"),a("t1Ps"),null,null);t.exports=n.exports},xb0E:function(t,e,a){e=t.exports=a("7DhM")(),e.push([t.i,".team .logo{width:200px;height:200px;max-width:200px;max-height:200px;min-height:200px;min-width:200px}.team .title{font-size:20px;font-weight:700;width:100%;word-wrap:normal;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-overflow-ellipsis:'...'}.team .intro{height:90px;margin-bottom:10px;overflow:hidden}",""])},y7Qv:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-xs-12 col-sm-12 col-md-12"},[a("ul",{staticClass:"pagination"},[t.pages.prev_page_url?a("li",[a("a",{attrs:{href:"#",rel:"prev"},on:{click:function(e){e.preventDefault(),t.change(-1)}}},[t._v("上一页")])]):a("li",{staticClass:"disabled"},[a("span",[t._v("上一页")])]),t._v(" "),a("li",{staticClass:"disabled"},[a("span",[t._v(t._s(t.pages.current_page)+" / "+t._s(t.totalPage))])]),t._v(" "),t.pages.next_page_url?a("li",[a("a",{attrs:{href:"#",rel:"next"},on:{click:function(e){e.preventDefault(),t.change(1)}}},[t._v("下一页")])]):a("li",{staticClass:"disabled"},[a("span",[t._v("下一页")])])])])},staticRenderFns:[]}}},[1]);