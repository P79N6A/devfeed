webpackJsonp([4],{"+Bxr":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("I3G/"),n=s.n(a),r=s("/ocq"),o=s("1+Pe"),i=s.n(o);n.a.use(r.default);var l=new r.default({mode:"history",base:"/admin/source/",routes:[{path:"/",name:"SourceList",component:i.a}]}),u=s("BHTl"),c=s.n(u);s("WRGp"),n.a.config.productionTip=!1,new n.a({el:"#sourceApp",router:l,template:"<source-view />",components:{SourceView:c.a}})},"1+Pe":function(t,e,s){var a=s("VU/8")(s("DmCe"),s("rVGr"),!1,null,null,null);t.exports=a.exports},2:function(t,e,s){t.exports=s("+Bxr")},"5JTY":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"SourceView"}},BHTl:function(t,e,s){var a=s("VU/8")(s("5JTY"),s("MYGu"),!1,null,null,null);t.exports=a.exports},DmCe:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"SourceList",data:function(){return{hasResult:!1,result:{data:[]},msg:"",status:!0}},watch:{hasResult:function(){return self.result.data>0}},methods:{closeAlert:function(){this.msg=!1,this.status=!0},publish:function(t){var e=this;if(confirm("确定要发布这篇文章吗？")){var s=e.result.data[t];e.$set(e.result.data[t],"onqueue",!0),e.result.data[t]=s,axios.post("/api/v1/quotas/publish/"+s.id).then(function(s){e.result.data.splice(t,1),e.status=0===s.data.code,e.msg=e.status?s.data.data:s.data.message}).catch(function(t){console&&"function"==typeof console.log&&console.log(t),e.msg="请求失败，请联系管理员解决。",e.status=!1})}},del:function(t){var e=this;if(confirm("确定要删除这篇文章吗？")){var s=e.result.data[t];axios.post("/api/v1/quotas/del/"+s.id).then(function(t){e.status=0===t.data.code,e.msg=e.status?t.data.data:t.data.message,e.fetch()}).catch(function(t){console&&"function"==typeof console.log&&console.log(t),e.msg="请求失败，请联系管理员解决。",e.status=!1})}},fetch:function(t){t=void 0===t||isNaN(t)?1:t;var e=this;axios.post("/api/v1/quotas/list",{size:20,page:t}).then(function(t){e.result=t.data.data}).catch(function(t){try{console.log(t.data)}catch(t){}})}},created:function(){this.fetch()}}},MYGu:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-8 col-md-offset-2"},[e("router-view")],1)},staticRenderFns:[]}},"VU/8":function(t,e){t.exports=function(t,e,s,a,n,r){var o,i=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(o=t,i=t.default);var u,c="function"==typeof i?i.options:i;if(e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),s&&(c.functional=!0),n&&(c._scopeId=n),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=u):a&&(u=a),u){var d=c.functional,_=d?c.render:c.beforeCreate;d?(c._injectStyles=u,c.render=function(t,e){return u.call(e),_(t,e)}):c.beforeCreate=_?[].concat(_,u):[u]}return{esModule:o,exports:i,options:c}}},WRGp:function(t,e,s){void 0===window.axios&&(window.axios=s("mtWM"));var a=document.head.querySelector('meta[name="csrf-token"]');window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",a?window.axios.defaults.headers.common["X-CSRF-TOKEN"]=a.content:console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token")},rVGr:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"sourceList"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.msg,expression:"msg"}],staticClass:"alert alert-dismissible",class:{"alert-success":t.status,"alert-danger":!t.status},attrs:{role:"alert"}},[s("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.closeAlert()}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),t._v(" "),s("span",{staticClass:"sr-only"},[t._v("Close")])]),t._v(" "),s("strong",[t._v(t._s(t.msg))])]),t._v(" "),t.hasResult?t._e():s("div",{staticClass:"alert alert-info",attrs:{role:"alert"}},[s("p",[t._v("暂无数据")])]),t._v(" "),t.hasResult?s("table",{staticClass:"table table-bordered"},[t._m(0),t._v(" "),s("tbody",t._l(t.result.data,function(e,a){return s("tr",[s("td",[t._v(t._s(e.id))]),t._v(" "),s("td",[s("a",{attrs:{href:e.url,title:e.title}},[t._v(t._s(e.title))])]),t._v(" "),s("td",[s("a",{attrs:{href:e.site_url,title:e.site_name}},[t._v(t._s(e.site_name))])]),t._v(" "),s("td",[t._v(t._s(e.team?e.team.title:"未设定"))]),t._v(" "),s("td",[s("a",{attrs:{href:e.author_url,title:e.author_name}},[t._v(t._s(e.author_name))])]),t._v(" "),s("td",[t._v(t._s(e.tags))]),t._v(" "),s("td",[s("button",{staticClass:"btn btn-xs btn-warning",attrs:{disabled:e.onqueue},on:{click:function(e){t.publish(a)}}},[t._v("发布\n                ")]),t._v(" "),s("button",{staticClass:"btn btn-xs btn-danger",on:{click:function(e){t.del(a)}}},[t._v("删除")])])])}))]):t._e(),t._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.result.total>1,expression:"result.total > 1"}],staticClass:"pagination"},[t.result.prev_page_url?s("li",[s("a",{attrs:{href:"#",rel:"prev"},on:{click:function(e){e.preventDefault(),t.fetch(t.result.current_page-1)}}},[t._v("上一页")])]):s("li",{staticClass:"disabled"},[s("span",[t._v("上一页")])]),t._v(" "),s("li",{staticClass:"disabled"},[s("span",[t._v(t._s(t.result.current_page)+" / "+t._s(parseInt(t.result.total/t.result.per_page)+1))])]),t._v(" "),t.result.next_page_url?s("li",[s("a",{attrs:{href:"#",rel:"next"},on:{click:function(e){e.preventDefault(),t.fetch(t.result.current_page+1)}}},[t._v("下一页")])]):s("li",{staticClass:"disabled"},[s("span",[t._v("下一页")])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"bg-primary"},[s("tr",[s("th",[t._v("ID")]),t._v(" "),s("th",[t._v("标题")]),t._v(" "),s("th",[t._v("站点")]),t._v(" "),s("th",[t._v("团队")]),t._v(" "),s("th",[t._v("作者")]),t._v(" "),s("th",[t._v("标签")]),t._v(" "),s("th",[t._v("操作")])])])}]}}},[2]);