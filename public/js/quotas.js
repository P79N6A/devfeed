webpackJsonp([0],[,,function(t,e,s){var a,r;a=s(4);var o=s(8);r=a=a||{},"object"!=typeof a["default"]&&"function"!=typeof a["default"]||(r=a=a["default"]),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,t.exports=a},function(t,e,s){var a,r;a=s(5);var o=s(7);r=a=a||{},"object"!=typeof a["default"]&&"function"!=typeof a["default"]||(r=a=a["default"]),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,t.exports=a},function(t,e,s){"use strict";e["default"]={name:"quotaList",data:function(){return{result:{},msg:"",status:!0}},methods:{closeAlert:function(){this.msg=!1,this.status=!0},publish:function(t){var e=this;if(confirm("确定要发布这篇文章吗？")){var s=e.result.data[t];e.$set(e.result.data[t],"onqueue",!0),e.result.data[t]=s,e.$http.post("/api/v1/quotas/publish/"+s.id).then(function(s){e.result.data.splice(t,1),e.status=0===s.data.code,e.msg=e.status?s.data.data:s.data.message},function(t){e.msg="请求失败，请联系管理员解决。",e.status=!1})}},del:function(t){var e=this;if(confirm("确定要删除这篇文章吗？")){var s=e.result.data[t];e.$http.post("/api/v1/quotas/del/"+s.id).then(function(t){e.status=0===t.data.code,e.msg=e.status?t.data.data:t.data.message,e.fetch()},function(t){})}},fetch:function(t){t="undefined"==typeof t||isNaN(t)?1:t;var e=this;e.$http.post("/api/v1/quotas/list",{size:20,page:t}).then(function(t){var s=t.data;e.result=s.data},function(t){})}},created:function(){this.fetch()}}},function(t,e,s){"use strict";e["default"]={name:"siteList",data:function(){return{rows:[],form:{name:"",url:"",list_url:"",sel_link:"",sel_title:"",sel_content:"",sel_tag:"",sel_author_link:"",sel_author_name:"",published:!1}}},methods:{edit:function(t){this.form=Object.assign({},this.rows[t])},del:function(t){var e=this;this.$http.post("/api/v1/site/del/"+t).then(function(){e.loadSites.call(e)},function(t){})},submit:function(){var t=this;this.$http.post("/api/v1/site",this.form).then(function(e){t.loadSites()},function(t){})},checkFetch:function(){this.$http.post("/api/v1/site/check",this.form).then(function(t){},function(t){})},fetch:function(t){var e=this;e.$http.post("/api/v1/site/fetch/"+t).then(function(t){e.loadSites()},function(t){})},loadSites:function(){var t=this;this.$http.post("/api/v1/sites",{size:20}).then(function(e){var s=e.data;t.rows=s.data.data},function(t){})}},mounted:function(){this.loadSites()}}},,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-9"},[e("table",{staticClass:"table table-bordered"},[t._m(0)," ",e("tbody",[t._l(t.rows,function(s,a){return e("tr",[e("td",[t._s(s.id)])," ",e("td",[e("a",{attrs:{href:s.url,title:s.name}},[t._s(s.name)])])," ",e("td",[t._s(s.published?"是":"否")])," ",e("td",[t._s(s.last_check)])," ",e("td",[t._s(s.list_url)])," ",e("td",[e("button",{staticClass:"btn btn-xs btn-success",on:{click:function(e){t.edit(a)}}},["编辑"])," ",e("button",{staticClass:"btn btn-xs btn-danger",on:{click:function(e){t.del(s.id)}}},["删除"])," ",e("button",{staticClass:"btn btn-xs btn-primary",on:{click:function(e){t.fetch(s.id)}}},["抓取"])])])})])])])," ",e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"form"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{"for":"name"}},["名称"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{name:"name",id:"name",type:"text"},domProps:{value:t._s(t.form.name)},on:{input:function(e){e.target.composing||(t.form.name=e.target.value)}}})])," ",e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{"for":"url"}},["地址"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.url,expression:"form.url"}],staticClass:"form-control",attrs:{name:"url",id:"url",type:"text"},domProps:{value:t._s(t.form.url)},on:{input:function(e){e.target.composing||(t.form.url=e.target.value)}}})])," ",e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{"for":"list_url"}},["列表页地址"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.list_url,expression:"form.list_url"}],staticClass:"form-control",attrs:{name:"list_url",id:"list_url",type:"text"},domProps:{value:t._s(t.form.list_url)},on:{input:function(e){e.target.composing||(t.form.list_url=e.target.value)}}})])," ",e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{"for":"selLink"}},["链接选择器"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sel_link,expression:"form.sel_link"}],staticClass:"form-control",attrs:{name:"selLink",id:"selLink",type:"text",placeholder:"选择器对应元素href属性为详情页url"},domProps:{value:t._s(t.form.sel_link)},on:{input:function(e){e.target.composing||(t.form.sel_link=e.target.value)}}})])," ",e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{"for":"selTitle"}},["标题选择器"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sel_title,expression:"form.sel_title"}],staticClass:"form-control",attrs:{name:"selTitle",id:"selTitle",type:"text",placeholder:"选择器对应元素innerText为标题"},domProps:{value:t._s(t.form.sel_title)},on:{input:function(e){e.target.composing||(t.form.sel_title=e.target.value)}}})])," ",e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{"for":"selContent"}},["内容选择器"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sel_content,expression:"form.sel_content"}],staticClass:"form-control",attrs:{name:"selContent",id:"selContent",type:"text",placeholder:"选择器对应元素的innerHTML为内容"},domProps:{value:t._s(t.form.sel_content)},on:{input:function(e){e.target.composing||(t.form.sel_content=e.target.value)}}})])," ",e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{"for":"selTag"}},["标签选择器"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sel_tag,expression:"form.sel_tag"}],staticClass:"form-control",attrs:{name:"selTag",id:"selTag",type:"text",placeholder:"选择器对应元素的innerText为标签"},domProps:{value:t._s(t.form.sel_tag)},on:{input:function(e){e.target.composing||(t.form.sel_tag=e.target.value)}}})])," ",e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{"for":"selAuthorLink"}},["作者地址选择器"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sel_author_link,expression:"form.sel_author_link"}],staticClass:"form-control",attrs:{name:"selAuthor",id:"selAuthorLink",type:"text",placeholder:"选择器对应元素的href为作者地址"},domProps:{value:t._s(t.form.sel_author_link)},on:{input:function(e){e.target.composing||(t.form.sel_author_link=e.target.value)}}})])," ",e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{"for":"selAuthorName"}},["作者名称选择器"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sel_author_name,expression:"form.sel_author_name"}],staticClass:"form-control",attrs:{name:"selAuthor",id:"selAuthorName",type:"text",placeholder:"选择器对应元素的innerText为作者地址"},domProps:{value:t._s(t.form.sel_author_name)},on:{input:function(e){e.target.composing||(t.form.sel_author_name=e.target.value)}}})])," ",e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{"for":"published"}},["自动发布 ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.published,expression:"form.published"}],attrs:{type:"checkbox",name:"published",value:"true",id:"published"},domProps:{checked:Array.isArray(t.form.published)?t._i(t.form.published,"true")>-1:t._q(t.form.published,!0)},on:{change:function(e){var s=t.form.published,a=e.target,r=!!a.checked;if(Array.isArray(s)){var o="true",n=t._i(s,o);r?n<0&&(t.form.published=s.concat(o)):n>-1&&(t.form.published=s.slice(0,n).concat(s.slice(n+1)))}else t.form.published=r}}})])])])," ",e("button",{staticClass:"btn btn-success",on:{click:t.checkFetch}},["测试抓取"])," ",e("button",{staticClass:"btn btn-primary",on:{click:t.submit}},["保存站点"])])])},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("thead",{staticClass:"bg-primary"},[e("tr",[e("th",["ID"])," ",e("th",["名称"])," ",e("th",["自动发布"])," ",e("th",["最后采集时间"])," ",e("th",["列表地址"])," ",e("th",["操作"])])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.msg,expression:"msg"}],staticClass:"alert alert-dismissible","class":{"alert-success":t.status,"alert-danger":!t.status},attrs:{role:"alert"}},[e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.closeAlert()}}},[e("span",{attrs:{"aria-hidden":"true"}},["×"])," ",e("span",{staticClass:"sr-only"},["Close"])])," ",e("strong",[t._s(t.msg)])])," ",e("table",{staticClass:"table table-bordered"},[t._m(0)," ",e("tbody",[t._l(t.result.data,function(s,a){return e("tr",[e("td",[t._s(s.id)])," ",e("td",[e("a",{attrs:{href:s.url,title:s.title}},[t._s(s.title)])])," ",e("td",[e("a",{attrs:{href:s.site_url,title:s.site_name}},[t._s(s.site_name)])])," ",e("td",[e("a",{attrs:{href:s.author_url,title:s.author_name}},[t._s(s.author_name)])])," ",e("td",[t._s(s.tags)])," ",e("td",[e("button",{staticClass:"btn btn-xs btn-warning",attrs:{disabled:s.onqueue},on:{click:function(e){t.publish(a)}}},["发布"])," ",e("button",{staticClass:"btn btn-xs btn-danger",on:{click:function(e){t.del(a)}}},["删除"])])])})])])," ",e("ul",{directives:[{name:"show",rawName:"v-show",value:t.result.total>1,expression:"result.total > 1"}],staticClass:"pagination"},[t.result.prev_page_url?e("li",[e("a",{attrs:{href:"#",rel:"prev"},on:{click:function(e){e.preventDefault(),t.fetch(t.result.current_page-1)}}},["上一页"])]):e("li",{staticClass:"disabled"},[e("span",["上一页"])])," "," ",e("li",{staticClass:"disabled"},[e("span",[t._s(t.result.current_page)+" / "+t._s(parseInt(t.result.total/t.result.per_page)-1)])])," ",t.result.next_page_url?e("li",[e("a",{attrs:{href:"#",rel:"next"},on:{click:function(e){e.preventDefault(),t.fetch(t.result.current_page+1)}}},["下一页"])]):e("li",{staticClass:"disabled"},[e("span",["下一页"])])," "])])},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("thead",{staticClass:"bg-primary"},[e("tr",[e("th",["ID"])," ",e("th",["标题"])," ",e("th",["站点"])," ",e("th",["作者"])," ",e("th",["标签"])," ",e("th",["操作"])])])}]}},function(t,e,s){"use strict";var a=s(1),r=s.n(a),o=s(0),n=s.n(o),i=s(2),l=s.n(i),u=s(3),c=s.n(u);r.a.config.devtools=!0,r.a.use(n.a);var m=document.querySelector("meta[name=csrf-token]");if(m&&(m=m.getAttribute("content")),m)r.a.http.headers.common["X-CSRF-TOKEN"]=m;else{var f=document.cookie.split(";");f.map(function(t){var e=t.split("=");e&&e.length&&e[0].indexOf("XSRF-TOKEN")>=0&&(r.a.http.headers.common["X-XSRF-TOKEN"]=e[1].trim())})}new r.a({el:"#quotaApp",components:{quotaList:l.a,siteList:c.a}})}],[9]);